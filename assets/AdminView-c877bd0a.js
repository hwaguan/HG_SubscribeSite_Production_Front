import{d as k,s as Q,r as h,o,c as l,i as K,f as s,H as ye,a as e,q as Z,v as de,I as ce,B as U,e as L,x as D,F,k as J,p as O,g as q,J as ne,A as X,_ as N,b as j,m as G,K as se,L as ee,M as ae,N as Pe,w as ie,t as Y,O as fe,z as Ae,h as xe,y as Le}from"./index-42e027cc.js";const oe=a=>(O("data-v-79d25759"),a=a(),q(),a),Ie={class:"AdminLoginContainer"},De={class:"LoginPanelContainer"},Se={class:"panenTitle"},ke=oe(()=>e("h2",null,"華冠投顧",-1)),Be=oe(()=>e("h4",null,"ClickGo 網站管理平台",-1)),Te=["type"],Ne=oe(()=>e("path",{d:"M634 471L36 3.5A16 16 0 0 0 13.5 6l-10 12.5A16 16 0 0 0 6 41l598 467.5a16 16 0 0 0 22.5-2.5l10-12.5A16 16 0 0 0 634 471zM296.8 146.5l134.8 105.4C429.4 191.9 380.5 144 320 144a112.3 112.3 0 0 0 -23.2 2.5zm46.4 219.1L208.4 260.2C210.7 320.1 259.5 368 320 368a113 113 0 0 0 23.2-2.5zM320 112c98.7 0 189.1 55 237.9 144a285.5 285.5 0 0 1 -44 60.2l37.7 29.5a333.7 333.7 0 0 0 52.9-75.1 32.4 32.4 0 0 0 0-29.2C550.3 135.6 442.9 64 320 64c-36.7 0-71.7 7-104.6 18.8l46.4 36.3c18.9-4.3 38.3-7.1 58.2-7.1zm0 288c-98.7 0-189.1-55-237.9-144a285.5 285.5 0 0 1 44.1-60.2l-37.7-29.5a333.6 333.6 0 0 0 -52.9 75.1 32.4 32.4 0 0 0 0 29.2C89.7 376.4 197.1 448 320 448c36.7 0 71.7-7.1 104.6-18.8l-46.4-36.3C359.3 397.2 339.9 400 320 400z"},null,-1)),He=[Ne],ze=oe(()=>e("path",{d:"M288 144a110.9 110.9 0 0 0 -31.2 5 55.4 55.4 0 0 1 7.2 27 56 56 0 0 1 -56 56 55.4 55.4 0 0 1 -27-7.2A111.7 111.7 0 1 0 288 144zm284.5 97.4C518.3 135.6 410.9 64 288 64S57.7 135.6 3.5 241.4a32.4 32.4 0 0 0 0 29.2C57.7 376.4 165.1 448 288 448s230.3-71.6 284.5-177.4a32.4 32.4 0 0 0 0-29.2zM288 400c-98.7 0-189.1-55-237.9-144C98.9 167 189.3 112 288 112s189.1 55 237.9 144C477.1 345 386.7 400 288 400z"},null,-1)),Ee=[ze],Re=k({__name:"AdminLogin",emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=b,w=new ne,c=new X;let i=h({userName:"",password:""}),d=h(!1),_=h(!1);const u=P=>{f("loadingSwitch",P)},t=async()=>{let P=i.value.userName=="sysAdmin"&&i.value.password=="1qazXSW@";if(n.hostPath+n.tokenPath,i.value.userName!=""&&i.value.password!="")if(u(!0),P){u(!1);const p='{"admID": 0,"admName": "最高管理者","admCorp": "HG01","admDep": "0004","admMail": "","admExt": "","admAccount": "","admPassword": "","admAuthority": "all","admEnabled": 1,"admCreateDate": "2023-12-06T16:40:28.387","admLastModify": "","admGroup": 0}';sessionStorage.setItem("adminInfo",p),f("redirectPage",null,"main")}else{const p=n.hostPath+n.adminLoginPath,y={account:i.value.userName,password:i.value.password},v=await c.callAPI(p,y);if(v.result)sessionStorage.setItem("adminInfo",JSON.stringify(v.message)),f("redirectPage",null,"main");else if(v.code==-1){let A="<a href='#'>忘記密碼?</a>";u(!1),w.centralError("登入失敗","請確認您的登入資訊!",A)}else J.fire({icon:"warning",title:"服務器錯誤，請稍候再試"});u(!1)}};return(P,p)=>(o(),l(F,null,[K(ye,{status:s(_)},null,8,["status"]),e("div",Ie,[e("div",De,[e("div",Se,[ke,Be,Z(e("input",{class:"acc",type:"text","onUpdate:modelValue":p[0]||(p[0]=y=>s(i).userName=y),placeholder:"帳號"},null,512),[[de,s(i).userName]]),Z(e("input",{class:"pwd",type:s(d)?"text":"password","onUpdate:modelValue":p[1]||(p[1]=y=>s(i).password=y),placeholder:"密碼"},null,8,Te),[[ce,s(i).password]]),s(d)?(o(),l("svg",{key:0,class:"passEyeClose",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"20",viewBox:"0 0 640 512",onClick:p[2]||(p[2]=y=>U(d)?d.value=!1:d=!1),title:"顯示密碼"},He)):L("",!0),s(d)?L("",!0):(o(),l("svg",{key:1,class:"passEye",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"18",viewBox:"0 0 576 512",onClick:p[3]||(p[3]=y=>U(d)?d.value=!0:d=!0),title:"隱藏密碼"},Ee)),e("div",{class:D({noGo:s(i).userName==""||s(i).password=="",goodToGo:s(i).userName!=""&&s(i).password!=""}),onClick:t}," GO ",2)])])])],64))}});const re=N(Re,[["__scopeId","data-v-79d25759"]]),ue=a=>(O("data-v-5c674bd8"),a=a(),q(),a),Ve={class:"menuContainer"},Fe=["onMouseover","onMouseout"],Ge=["onClick"],Oe={class:"menuItemText"},qe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-house-fill homeIcon",viewBox:"0 0 16 16"},je=ue(()=>e("path",{d:"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"},null,-1)),Ue=ue(()=>e("path",{d:"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"},null,-1)),Ke=[je,Ue],Je=["innerHTML"],Qe={class:"switchBtnCase"},We=ue(()=>e("path",{"fill-rule":"evenodd",d:"M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"},null,-1)),Xe=[We],Ze=["onMouseover","onMouseout"],Ye=["innerHTML","onClick"],et=k({__name:"AdminMenu",emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=JSON.parse(""+sessionStorage.getItem("adminInfo")).admID,w=new X,c=n.hostPath+n.adminMenuPath,i=b;let d=h();const _=[{Action:"Home",Text:"首頁",Hit:!0,Mov:!1,Open:!1}];let u=h(_[0]),t=h(null);(async()=>{const v={mid:f},A=await w.callAPI(c,v);d.value=A.message,d.value.forEach($=>{$.Open=!1,$.Hit=!1,$.Mov=!1,$.SubMenu&&$.SubMenu.forEach(I=>{I.Hit=!1,I.Mov=!1})}),d.value=_.concat(A.message)})();const p=v=>{t.value!=null&&(t.value.Hit=!1),t.value=null,typeof v.SubMenu>"u"?u.value!=v&&(u.value!=null&&(u.value.Hit=!1),v.Hit=!0,u.value=v,i("redirectPage",null,v.Action)):v.Open=!v.Open},y=v=>{u.value!=null&&(u.value.Hit=!1),u.value=null,t.value!=v&&(t.value!=null&&(t.value.Hit=!1),v.Hit=!0,t.value=v,i("redirectPage",null,v.Action))};return(v,A)=>(o(),l("div",Ve,[(o(!0),l(F,null,j(s(d),($,I)=>(o(),l("div",{class:D(["mainMenuItem",{mainMenuItemMov:$.Mov&&!$.Hit,mainMenuItemHit:$.Hit}]),key:I,onMouseover:m=>$.Mov=!0,onMouseout:m=>$.Mov=!1},[e("div",{class:"mainMenuItemContainer",onClick:m=>p($)},[e("div",Oe,[I==0?(o(),l("svg",qe,Ke)):L("",!0),e("span",{innerHTML:$.Text},null,8,Je)]),e("div",Qe,[$.SubMenu?(o(),l("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:D(["bi bi-triangle-fill",{btnSwitchOff:!$.Open}]),viewBox:"0 0 16 16"},Xe,2)):L("",!0)])],8,Ge),e("div",{class:D(["subMenu",[{openSub:$.Open},"subMenu_"+I]])},[(o(!0),l(F,null,j($.SubMenu,(m,r)=>(o(),l("div",{class:"subMenuItem",key:r,onMouseover:g=>m.Mov=!0,onMouseout:g=>m.Mov=!1},[e("div",{class:D(["subMenuItemText",{subMenuItemMov:m.Mov&&!m.Hit,subMenuItemHit:m.Hit}]),innerHTML:m.Text,onClick:g=>y(m)},null,10,Ye)],40,Ze))),128))],2)],42,Fe))),128))]))}});const tt=N(et,[["__scopeId","data-v-5c674bd8"]]),st={class:"adminNavContainer"},at={class:"adminNavBody"},nt=e("div",{class:"adminNavMain"},null,-1),it={class:"adminNavBtn"},ot=e("path",{d:"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"},null,-1),lt=[ot],ct={class:"adminLeftMenu"},dt=k({__name:"AdminNav",emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=b,f=()=>{J.fire({icon:"question",title:"您確定要登出嗎",text:"你要確定都沒有工作要處理了嘿!!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"碓定",cancelButtonText:"放棄"}).then(i=>{i.isConfirmed&&(sessionStorage.clear(),n("redirectPage",null,"login"))})},w=(i,d)=>{n("redirectPage",i,d)},c=i=>{n("loadingSwitch",i)};return(i,d)=>(o(),l("div",st,[e("div",at,[nt,e("div",it,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512",onClick:d[0]||(d[0]=_=>f())},lt))])]),e("div",ct,[K(tt,{onRedirectPage:w,onLoadingSwitch:c})])]))}});const ut=a=>(O("data-v-9b084061"),a=a(),q(),a),rt={class:"mainContainer"},_t=ut(()=>e("div",{class:"mainHeader"},[e("div",{class:"mainOptions"},"Home")],-1)),vt=[_t],ht=k({__name:"AdminHome",setup(a){return(b,n)=>(o(),l("div",rt,vt))}});const _e=N(ht,[["__scopeId","data-v-9b084061"]]),mt=a=>(O("data-v-7b7bbd61"),a=a(),q(),a),pt={class:"mainContainer"},gt=mt(()=>e("div",{class:"mainHeader"},[e("div",{class:"mainTitle"},[e("h3",null,[G("會員管理 - "),e("span",{class:"titleMid"},"會員列表")])]),e("div",{class:"mainOptions"})],-1)),wt=[gt],ft=k({__name:"AdminMemberList",setup(a){return(b,n)=>(o(),l("div",pt,wt))}});const $t=N(ft,[["__scopeId","data-v-7b7bbd61"]]),Ct=a=>(O("data-v-8e3354db"),a=a(),q(),a),Mt={class:"mainContainer"},bt=Ct(()=>e("div",{class:"mainHeader"},[e("div",{class:"mainTitle"},[e("h3",null,"會員管理 - "),e("h4",null,"會員編輯")]),e("div",{class:"mainOptions"})],-1)),yt=[bt],Pt=k({__name:"AdminMemberEdit",setup(a){return(b,n)=>(o(),l("div",Mt,yt))}});const At=N(Pt,[["__scopeId","data-v-8e3354db"]]),xt={class:"mainContainer"},Lt=k({__name:"AdminMember",setup(a){let b=se(),n=h(0);const f=(c,i)=>{},w=()=>{};return b.value=b.value!=null?b.value:n.value==0?$t:At,(c,i)=>(o(),l("div",xt,[(o(),ee(ae(s(b)),{reset:w,onRedirectPage:f},null,32))]))}});const It=N(Lt,[["__scopeId","data-v-b9437090"]]),$e=Pe({id:"dbEntities",state:()=>({adminManagerEntity:{admID:Number,admName:String,admCorp:String,admDep:String,admMail:String,admExt:String,admAccount:String,admPassword:String,admGroup:Number,admAuthority:String,admEnabled:Number,admCreateDate:String,admLastModify:String}})}),B=a=>(O("data-v-ccc9ac18"),a=a(),q(),a),Dt={class:"mainContainer"},St={class:"mainHeader"},kt=B(()=>e("div",{class:"mainTitle"},[e("h3",null,[G("管理員設定 - "),e("span",{class:"titleMid"},"管理員列表")])],-1)),Bt={class:"mainOptions"},Tt=B(()=>e("div",null,null,-1)),Nt=B(()=>e("title",null,"搜尋",-1)),Ht=B(()=>e("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)),zt=[Nt,Ht],Et=B(()=>e("div",{class:"searchTitle"},"搜尋",-1)),Rt=B(()=>e("div",{class:"searchBody"},null,-1)),Vt=[Et,Rt],Ft={key:0,class:"zeroRow"},Gt=B(()=>e("div",null,[e("h4",null,"未尋獲任何資料...")],-1)),Ot={class:"showAllBtn"},qt={key:1,class:"listContainer"},jt={class:"resultRows"},Ut={class:"showRemoved"},Kt={class:"resultCount"},Jt={class:"resultNumber"},Qt=fe('<div class="listTitle" data-v-ccc9ac18><div class="listTitleField" data-v-ccc9ac18></div><div class="listTitleField" data-v-ccc9ac18>員編</div><div class="listTitleField" data-v-ccc9ac18>姓名</div><div class="listTitleField" data-v-ccc9ac18>部門</div><div class="listTitleField" data-v-ccc9ac18>權限</div><div class="listTitleField" data-v-ccc9ac18>Email</div><div class="listTitleField" data-v-ccc9ac18>操作</div></div>',1),Wt={class:"listBody"},Xt={class:"listLine"},Zt=["innerHTML"],Yt=["innerHTML"],es=["innerHTML"],ts=["innerHTML"],ss=["innerHTML"],as={class:"listField managerEmail"},ns=["href","innerHTML"],is={key:0,class:"listField managerAction"},os={class:"listAction"},ls=["onClick"],cs=B(()=>e("title",null,"編輯",-1)),ds=B(()=>e("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"},null,-1)),us=[cs,ds],rs={class:"listAction"},_s=["onClick"],vs=B(()=>e("title",null,"刪除",-1)),hs=B(()=>e("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"},null,-1)),ms=[vs,hs],ps={key:1,class:"listField managerAction2"},gs={class:"listAction"},ws=["onClick"],fs=B(()=>e("title",null,"復原",-1)),$s=B(()=>e("path",{d:"M5.921 11.9 1.353 8.62a.719.719 0 0 1 0-1.238L5.921 4.1A.716.716 0 0 1 7 4.719V6c1.5 0 6 0 7 8-2.5-4.5-7-4-7-4v1.281c0 .56-.606.898-1.079.62z"},null,-1)),Cs=[fs,$s],Ms={class:"listPagination"},bs={class:"PaginationContainer"},ys=B(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-rewind-fill"})],-1)),Ps=B(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-play-fill lastPage"})],-1)),As={class:"pageList"},xs=B(()=>e("div",null,null,-1)),Ls=B(()=>e("div",null,null,-1)),Is=B(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-play-fill"})],-1)),Ds=B(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-fast-forward-fill"})],-1)),Ss=k({__name:"AdminManagerList",props:{lastPage:Number},emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=b,w=new ne,c=new X;$e();const i=n.hostPath+n.adminManagerTotalPath,d=n.hostPath+n.adminManagerListPath,_=h(0),u=h();let t=h(0);h(!1);let P=h(!1),p=h(1),y=h(30),v=h([]),A=h(0),$=h(0),I=h(!1);const m=a;ie(()=>m.lastPage,(x,C)=>{p.value=C??1});const r=async(x,C)=>{T(!0);const M=await c.callAPI(i,{});_.value=M.message;const V=await c.callAPI(d,{page:x,rows:C,showAll:I.value});u.value=V.message,t.value=Math.ceil(_.value/y.value),A.value=t.value<5?1:Math.floor(p.value/5)*5,$.value=A.value+5>=t.value?t.value:A.value+5,v.value.length=0;for(let W=A.value;W<$.value+1;W++)v.value.push(W);T(!1)},g=x=>{f("redirectPage",{managerID:x,lastPage:p.value},"modify")},z=(x,C)=>{J.fire({icon:"question",title:`警告!
管理員 "`+C+`"
的權限將會被刪除`,text:"您要確定要這麼做?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"碓定",cancelButtonText:"放棄"}).then(M=>{if(M.isConfirmed){const V=n.hostPath+n.adminManagerRemovePath;(async()=>{T(!0),await c.callAPI(V,{aID:x}),T(!1),r(p.value,y.value),w.miniSuccess("管理員 "+C+" 已刪除")})()}})},H=(x,C)=>{J.fire({icon:"question",title:'管理員 "'+C+`"
的權限將會被復原`,text:"您要確定要這麼做?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"碓定",cancelButtonText:"放棄"}).then(M=>{if(M.isConfirmed){const V=n.hostPath+n.adminManagerRevivePath;(async()=>{T(!0),await c.callAPI(V,{aID:x}),T(!1),r(p.value,y.value),w.miniSuccess("管理員 "+C+" 已復原")})()}})},R=()=>{I.value=!I.value,r(p.value,y.value)},T=x=>{f("loadingSwitch",x)};return r(p.value,y.value),(x,C)=>(o(),l("div",Dt,[e("div",St,[kt,e("div",Bt,[Tt,e("div",null,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512",class:"searchBtn",onClick:C[0]||(C[0]=M=>U(P)?P.value=!s(P):P=!s(P))},zt))]),e("div",null,[e("div",{class:"btn btn-sm btn-success",onClick:C[1]||(C[1]=M=>g(0))},"新增管理員")])])]),e("div",{class:D(["searchContainer",{showSearch:s(P)}])},Vt,2),_.value==0?(o(),l("div",Ft,[Gt,e("div",Ot,[e("div",{class:D(["reviveBtn btn btn-sm",{enableRevive:!s(I),"btn-primary":s(I)}]),onClick:R},"顯示已刪除資料",2)])])):L("",!0),_.value>0?(o(),l("div",qt,[e("div",jt,[e("div",Ut,[e("div",{class:D(["reviveBtn btn btn-sm",{enableRevive:!s(I),"btn-primary":s(I)}]),onClick:R},"顯示已刪除資料",2)]),e("div",Kt,[G("資料總筆數："),e("span",Jt,Y(_.value),1),G(" 筆")])]),Qt,e("div",Wt,[(o(!0),l(F,null,j(u.value,(M,V)=>(o(),l("div",{class:D(["listLineContainer",{removedRecord:M.enabled==0}]),key:V},[e("div",Xt,[e("div",{class:"listField lineIndex",innerHTML:V+1},null,8,Zt),e("div",{class:"listField managerNo",innerHTML:M.No},null,8,Yt),e("div",{class:"listField managerName",innerHTML:M.name},null,8,es),e("div",{class:"listField managerDep",innerHTML:M.Dep},null,8,ts),e("div",{class:"listField managerAuth",innerHTML:M.AuthGroupName},null,8,ss),e("div",as,[e("a",{href:"mailTo:"+M.Email,innerHTML:M.Email},null,8,ns)]),M.enabled>0?(o(),l("div",is,[e("div",os,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512",class:"actionEdit",onClick:W=>g(M.ID)},us,8,ls))]),e("div",rs,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14",viewBox:"0 0 448 512",class:"actionDel",onClick:W=>z(M.ID,M.name)},ms,8,_s))])])):L("",!0),M.enabled==0?(o(),l("div",ps,[e("div",gs,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",class:"bi bi-reply-fill dataRestore",viewBox:"0 0 16 16",onClick:W=>H(M.ID,M.name)},Cs,8,ws))])])):L("",!0)])],2))),128))]),e("div",Ms,[e("div",bs,[ys,Ps,e("div",As,[xs,(o(!0),l(F,null,j(s(v),M=>(o(),l("div",{key:M,class:D(["pageItem",{pageItemPicked:M==s(p),pageItemMov:M!=s(p)}])},Y(M),3))),128)),Ls]),Is,Ds])])])):L("",!0)]))}});const ve=N(Ss,[["__scopeId","data-v-ccc9ac18"]]),ks={class:"objectContainer"},Bs=["onKeypress"],Ts=["onMouseover"],Ns=["innerHTML"],Hs=["innerHTML"],zs=k({__name:"AdminEmpPicker",emits:["changeEmp","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=b,w=new X,c=n.hostPath+n.adminGetEmpList;let i=h(),d=h({empNo:"",empName:"",empDep:"",empExt:"",empPassword:"",empConfirmPassword:""}),_=h([{}]),u=h(!1),t=h(-1);const P=r=>{f("loadingSwitch",r)};(async()=>{P(!0);const r=await w.callAPI(c,{});i.value=r.message,P(!1)})();const y=r=>{t.value=-1;const g=r.keyCode>36&&r.keyCode<41,z=r.keyCode>64&&r.keyCode<91||r.keyCode>93&&r.keyCode<123,H=r.keyCode>47&&r.keyCode<58;if(!((z||H||g||r.keyCode==8)&&d.value.empNo.length<8))return!1;d.value.empNo=d.value.empNo+String.fromCharCode(r.keyCode),u.value=d.value.empNo.length>0},v=()=>{let r=0;_.value=[],d.value.empNo!=""&&i.value.forEach(g=>{g.empNo.toUpperCase().indexOf(d.value.empNo.toUpperCase())>-1&&(r<10&&_.value.push(g),r++)})},A=r=>{r.keyCode==8&&(t.value=-1),(r.keyCode==38||r.keyCode==40||r.keyCode==13)&&(r.preventDefault(),r.keyCode==38?t.value>0&&t.value--:r.keyCode==13?I():t.value<_.value.length-1&&t.value++)},$=()=>{u.value=!1;const r=h({empNo:"",empName:"",empBranch:"",empDep:"",empDepName:"",empExt:"",empPassword:"",empConfirmPassword:""});d.value.empNo==""&&f("changeEmp",r.value)},I=()=>{d.value.empNo=_.value[t.value].empNo;const r=_.value[t.value];r.empPassword="000000",r.empConfirmPassword=r.empPassword,f("changeEmp",r)},m=()=>{v(),u.value=_.value.length>0};return(r,g)=>(o(),l("div",ks,[Z(e("input",{type:"text",maxlength:8,onKeypress:Ae(y,["prevent"]),onKeyup:v,onKeydown:A,onMousedown:m,onBlur:$,"onUpdate:modelValue":g[0]||(g[0]=z=>s(d).empNo=z)},null,40,Bs),[[de,s(d).empNo]]),e("div",{class:D(["filterContainer",{showFilter:s(_).length>0&&s(u)}])},[(o(!0),l(F,null,j(s(_),(z,H)=>(o(),l("div",{class:D(["filterItem",{focusItem:s(t)==H}]),key:H,onMouseover:R=>U(t)?t.value=H:t=H,onMousedown:g[1]||(g[1]=R=>I())},[e("span",{innerHTML:z.empNo},null,8,Ns),G(" "),e("span",{innerHTML:z.empName},null,8,Hs)],42,Ts))),128))],2)]))}});const Es=N(zs,[["__scopeId","data-v-9a58fb7b"]]),te=a=>(O("data-v-76a4fd01"),a=a(),q(),a),Rs={class:"actionContainer"},Vs={class:"viewAuth"},Fs=te(()=>e("path",{d:"M634 471L36 3.5A16 16 0 0 0 13.5 6l-10 12.5A16 16 0 0 0 6 41l598 467.5a16 16 0 0 0 22.5-2.5l10-12.5A16 16 0 0 0 634 471zM296.8 146.5l134.8 105.4C429.4 191.9 380.5 144 320 144a112.3 112.3 0 0 0 -23.2 2.5zm46.4 219.1L208.4 260.2C210.7 320.1 259.5 368 320 368a113 113 0 0 0 23.2-2.5zM320 112c98.7 0 189.1 55 237.9 144a285.5 285.5 0 0 1 -44 60.2l37.7 29.5a333.7 333.7 0 0 0 52.9-75.1 32.4 32.4 0 0 0 0-29.2C550.3 135.6 442.9 64 320 64c-36.7 0-71.7 7-104.6 18.8l46.4 36.3c18.9-4.3 38.3-7.1 58.2-7.1zm0 288c-98.7 0-189.1-55-237.9-144a285.5 285.5 0 0 1 44.1-60.2l-37.7-29.5a333.6 333.6 0 0 0 -52.9 75.1 32.4 32.4 0 0 0 0 29.2C89.7 376.4 197.1 448 320 448c36.7 0 71.7-7.1 104.6-18.8l-46.4-36.3C359.3 397.2 339.9 400 320 400z"},null,-1)),Gs=[Fs],Os=te(()=>e("path",{d:"M288 144a110.9 110.9 0 0 0 -31.2 5 55.4 55.4 0 0 1 7.2 27 56 56 0 0 1 -56 56 55.4 55.4 0 0 1 -27-7.2A111.7 111.7 0 1 0 288 144zm284.5 97.4C518.3 135.6 410.9 64 288 64S57.7 135.6 3.5 241.4a32.4 32.4 0 0 0 0 29.2C57.7 376.4 165.1 448 288 448s230.3-71.6 284.5-177.4a32.4 32.4 0 0 0 0-29.2zM288 400c-98.7 0-189.1-55-237.9-144C98.9 167 189.3 112 288 112s189.1 55 237.9 144C477.1 345 386.7 400 288 400z"},null,-1)),qs=[Os],js=["innerHTML"],Us={key:0,class:"editAuth"},Ks=te(()=>e("div",{class:"authBtnIcon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512"},[e("title",null,"編輯"),e("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"})])],-1)),Js=te(()=>e("div",{class:"authBtnText"},"編輯",-1)),Qs=[Ks,Js],Ws={key:1,class:"delAuth"},Xs=te(()=>e("div",{class:"authBtnIcon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14",viewBox:"0 0 448 512"},[e("title",null,"刪除"),e("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})])],-1)),Zs=te(()=>e("div",{class:"authBtnText"},"刪除",-1)),Ys=[Xs,Zs],ea=k({__name:"AdminAuthItem",props:{authText:String,authID:Number,mAuth:String,withSub:Boolean},emits:["authChange"],setup(a,{emit:b}){Q();const n=b,f=new ne,w=a;let c=h(""+w.mAuth);ie(()=>w.mAuth,(d,_)=>{c.value=""+d});const i=d=>{const _=w.authID+d;if((","+c.value+",").indexOf(","+_+",")<0){if(d!="V"&&(","+c.value+",").indexOf(","+w.authID+"V,")==-1){const t=d=="E"?"編輯":"刪除";return f.miniMessage(-1,"您必須先選取檢視權限才可以賦予"+t+"權限"),!1}c.value.length>0&&(c.value+=","),c.value+=_}else{if(c.value=(","+c.value+",").replace(","+_+",",",").substring(1,c.value.length-2),d=="V"){const t=","+w.authID+"D,",P=","+w.authID+"E,";c.value=(","+c.value+",").replace(t,",").replace(P,",").substring(1,c.value.length-2)}c.value==","&&(c.value="")}n("authChange",c.value)};return(d,_)=>(o(),l("div",Rs,[e("div",{class:D(["authListLine",{hasViewRight:(","+s(c)+",").indexOf(","+a.authID+"V,")>=0}])},[e("div",Vs,[(","+s(c)+",").indexOf(","+a.authID+"V,")<0?(o(),l("svg",{key:0,class:"passEyeClose",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"20",viewBox:"0 0 640 512",onClick:_[0]||(_[0]=u=>i("V")),title:"可瀏覽"},Gs)):L("",!0),(","+s(c)+",").indexOf(","+a.authID+"V,")>=0?(o(),l("svg",{key:1,class:"passEye",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"18",viewBox:"0 0 576 512",onClick:_[1]||(_[1]=u=>i("V")),title:"不可瀏覽"},qs)):L("",!0)]),e("div",{class:"authText",innerHTML:a.authText},null,8,js),a.withSub?L("",!0):(o(),l("div",Us,[e("div",{class:D(["authBtn",{editAble:(","+s(c)+",").indexOf(","+a.authID+"E,")>=0}]),onClick:_[2]||(_[2]=u=>i("E"))},Qs,2)])),a.withSub?L("",!0):(o(),l("div",Ws,[e("div",{class:D(["authBtn",{removeAble:(","+s(c)+",").indexOf(","+a.authID+"D,")>=0}]),onClick:_[3]||(_[3]=u=>i("D"))},Ys,2)]))],2)]))}});const he=N(ea,[["__scopeId","data-v-76a4fd01"]]),ta={class:"authListContainer"},sa={class:"subAuthListContainer"},aa=k({__name:"AdminAuthEditor",props:{mAuth:String},emits:["authChange","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=b,w=new X,c=a;h([]);let i=h(),d=h(""+c.mAuth);const _=n.hostPath+n.adminMenuPath,u=p=>{d.value=p,f("authChange",d.value.split(",").sort())};ie(()=>c.mAuth,(p,y)=>{d.value=""+p});const t=p=>{f("loadingSwitch",p)};return(async()=>{const p={mid:0};t(!0);const y=await w.callAPI(_,p);t(!1),i.value=y.message})(),(p,y)=>(o(),l("div",ta,[(o(!0),l(F,null,j(s(i),(v,A)=>(o(),l("div",{class:"authListPage",key:A},[K(he,{authID:v.ID,authText:v.Text,mAuth:s(d),withSub:typeof v.SubMenu=="object",onAuthChange:u},null,8,["authID","authText","mAuth","withSub"]),e("div",sa,[(o(!0),l(F,null,j(v.SubMenu,($,I)=>(o(),l("div",{class:"authSubPage",key:I},[K(he,{authID:$.ID,authText:$.Text,mAuth:s(d),withSub:!1,onAuthChange:u},null,8,["authID","authText","mAuth"])]))),128))])]))),128))]))}});const Ce=N(aa,[["__scopeId","data-v-51753127"]]),Me=a=>(O("data-v-3b021f15"),a=a(),q(),a),na={class:"mainHeader"},ia={class:"mainTitle"},oa={class:"backBtn"},la=Me(()=>e("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"},null,-1)),ca=[la],da={class:"titleMid"},ua={key:0,class:"actionText"},ra={key:1,class:"actionText"},_a=Me(()=>e("div",{class:"mainOptions"},null,-1)),va=k({__name:"AdminEditPageHeader",props:{eid:{type:Number,required:!0},subject:String,catagory:String},emits:["abrot"],setup(a,{emit:b}){const n=b,f=()=>{n("abrot")};return(w,c)=>(o(),l("div",na,[e("div",ia,[e("div",oa,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-arrow-left-circle gobackBtn",viewBox:"0 0 16 16",onClick:f},ca))]),e("div",null,[e("h3",null,[G(Y(a.subject)+" - ",1),e("span",da,[a.eid<1?(o(),l("span",ua,"新增")):L("",!0),a.eid>0?(o(),l("span",ra,"編輯")):L("",!0),G(Y(a.catagory),1)])])])]),_a]))}});const be=N(va,[["__scopeId","data-v-3b021f15"]]),E=a=>(O("data-v-da6e0bc5"),a=a(),q(),a),ha={class:"mainContainer"},ma={class:"admDataContainer"},pa={class:"admDataLine"},ga={class:"admDataCase"},wa=E(()=>e("div",{class:"admDataTitleField"},"員編",-1)),fa={class:"admDataInputeField"},$a=["innerHTML"],Ca={class:"admDataCase"},Ma=E(()=>e("div",{class:"admDataTitleField"},"姓名",-1)),ba={class:"admDataInputeField"},ya=["innerHTML"],Pa={class:"admDataLine"},Aa={class:"admDataCase"},xa=E(()=>e("div",{class:"admDataTitleField"},"部門",-1)),La={class:"admDataInputeField"},Ia=["innerHTML"],Da={class:"admDataCase"},Sa=E(()=>e("div",{class:"admDataTitleField"},"分機",-1)),ka={class:"admDataInputeField"},Ba=["innerHTML"],Ta={class:"admDataLine"},Na={class:"admDataCase"},Ha=E(()=>e("div",{class:"admDataTitleField"},"Email",-1)),za={class:"admDataInputeField"},Ea=["innerHTML"],Ra={class:"admDataLine"},Va={class:"admDataCase"},Fa=E(()=>e("div",{class:"admDataTitleField"},"密碼",-1)),Ga={class:"admDataInputeField"},Oa=["type"],qa=E(()=>e("path",{d:"M634 471L36 3.5A16 16 0 0 0 13.5 6l-10 12.5A16 16 0 0 0 6 41l598 467.5a16 16 0 0 0 22.5-2.5l10-12.5A16 16 0 0 0 634 471zM296.8 146.5l134.8 105.4C429.4 191.9 380.5 144 320 144a112.3 112.3 0 0 0 -23.2 2.5zm46.4 219.1L208.4 260.2C210.7 320.1 259.5 368 320 368a113 113 0 0 0 23.2-2.5zM320 112c98.7 0 189.1 55 237.9 144a285.5 285.5 0 0 1 -44 60.2l37.7 29.5a333.7 333.7 0 0 0 52.9-75.1 32.4 32.4 0 0 0 0-29.2C550.3 135.6 442.9 64 320 64c-36.7 0-71.7 7-104.6 18.8l46.4 36.3c18.9-4.3 38.3-7.1 58.2-7.1zm0 288c-98.7 0-189.1-55-237.9-144a285.5 285.5 0 0 1 44.1-60.2l-37.7-29.5a333.6 333.6 0 0 0 -52.9 75.1 32.4 32.4 0 0 0 0 29.2C89.7 376.4 197.1 448 320 448c36.7 0 71.7-7.1 104.6-18.8l-46.4-36.3C359.3 397.2 339.9 400 320 400z"},null,-1)),ja=[qa],Ua=E(()=>e("path",{d:"M288 144a110.9 110.9 0 0 0 -31.2 5 55.4 55.4 0 0 1 7.2 27 56 56 0 0 1 -56 56 55.4 55.4 0 0 1 -27-7.2A111.7 111.7 0 1 0 288 144zm284.5 97.4C518.3 135.6 410.9 64 288 64S57.7 135.6 3.5 241.4a32.4 32.4 0 0 0 0 29.2C57.7 376.4 165.1 448 288 448s230.3-71.6 284.5-177.4a32.4 32.4 0 0 0 0-29.2zM288 400c-98.7 0-189.1-55-237.9-144C98.9 167 189.3 112 288 112s189.1 55 237.9 144C477.1 345 386.7 400 288 400z"},null,-1)),Ka=[Ua],Ja={class:"admDataCase"},Qa=E(()=>e("div",{class:"admDataTitleField"},"確認密碼",-1)),Wa={class:"admDataInputeField"},Xa=["type"],Za=E(()=>e("path",{d:"M634 471L36 3.5A16 16 0 0 0 13.5 6l-10 12.5A16 16 0 0 0 6 41l598 467.5a16 16 0 0 0 22.5-2.5l10-12.5A16 16 0 0 0 634 471zM296.8 146.5l134.8 105.4C429.4 191.9 380.5 144 320 144a112.3 112.3 0 0 0 -23.2 2.5zm46.4 219.1L208.4 260.2C210.7 320.1 259.5 368 320 368a113 113 0 0 0 23.2-2.5zM320 112c98.7 0 189.1 55 237.9 144a285.5 285.5 0 0 1 -44 60.2l37.7 29.5a333.7 333.7 0 0 0 52.9-75.1 32.4 32.4 0 0 0 0-29.2C550.3 135.6 442.9 64 320 64c-36.7 0-71.7 7-104.6 18.8l46.4 36.3c18.9-4.3 38.3-7.1 58.2-7.1zm0 288c-98.7 0-189.1-55-237.9-144a285.5 285.5 0 0 1 44.1-60.2l-37.7-29.5a333.6 333.6 0 0 0 -52.9 75.1 32.4 32.4 0 0 0 0 29.2C89.7 376.4 197.1 448 320 448c36.7 0 71.7-7.1 104.6-18.8l-46.4-36.3C359.3 397.2 339.9 400 320 400z"},null,-1)),Ya=[Za],en=E(()=>e("path",{d:"M288 144a110.9 110.9 0 0 0 -31.2 5 55.4 55.4 0 0 1 7.2 27 56 56 0 0 1 -56 56 55.4 55.4 0 0 1 -27-7.2A111.7 111.7 0 1 0 288 144zm284.5 97.4C518.3 135.6 410.9 64 288 64S57.7 135.6 3.5 241.4a32.4 32.4 0 0 0 0 29.2C57.7 376.4 165.1 448 288 448s230.3-71.6 284.5-177.4a32.4 32.4 0 0 0 0-29.2zM288 400c-98.7 0-189.1-55-237.9-144C98.9 167 189.3 112 288 112s189.1 55 237.9 144C477.1 345 386.7 400 288 400z"},null,-1)),tn=[en],sn={class:"authContainer"},an={class:"authContainerHeader"},nn=E(()=>e("div",null,[e("h5",null,"權限設定")],-1)),on={key:0},ln=E(()=>e("option",{value:"99_"}," --- 請選擇 --- ",-1)),cn=["value","innerHTML"],dn={class:"btnContainer"},un=E(()=>e("div",null,null,-1)),rn={class:"ActionBtnContainer"},_n=["innerHTML"],vn=k({__name:"AdminManagerEdit",props:{mid:{type:Number,required:!0},lstPG:{type:Number,required:!0}},emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=b,w=new X;let c=h(!1),i=h(!1);h();let d=h(),_=h(!1);const u=a;let t=h({empID:"",empNo:"",empName:"",empBranch:"",empBranchName:"",empDep:"",empDepName:"",empExt:"",empMail:"",empGroup:99,empPassword:u.mid==0?"000000":"",empConfirmPassword:u.mid==0?"000000":"",empAuth:"".split(","),empEnabled:!0});const P=m=>{t.value.empAuth=m,$()},p=()=>{t.value.empNo!=""?J.fire({icon:"question",title:"警告! 資料異動尚未儲存",text:"請問您確定要放棄"+(u.mid<1?"新增":"修改")+"嗎?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",confirmButtonText:"碓定放棄",cancelButtonText:"繼續編輯"}).then(m=>{m.isConfirmed&&(t.value={empID:"",empNo:"",empName:"",empBranch:"",empBranchName:"",empDep:"",empDepName:"",empExt:"",empMail:"",empGroup:99,empPassword:(u.mid==0,""),empConfirmPassword:(u.mid==0,""),empAuth:[],empEnabled:!0},f("redirectPage",{managerID:0,lastPage:u.lstPG},"list"))}):(t.value={empID:"",empNo:"",empName:"",empBranch:"",empBranchName:"",empDep:"",empDepName:"",empExt:"",empMail:"",empGroup:99,empPassword:(u.mid==0,""),empConfirmPassword:(u.mid==0,""),empAuth:[],empEnabled:!0},f("redirectPage",{managerID:0,lastPage:u.lstPG},"list"))},y=m=>{t.value=m,$()},v=m=>{f("loadingSwitch",m)},A=m=>{const r=m.target.value.split("_");t.value.empGroup=parseInt(r[0]),t.value.empAuth=r[1].split(","),$()},$=()=>{let m=!1;u.mid>0?(m=t.value.empAuth.length>0,(t.value.empPassword!=""||t.value.empConfirmPassword!="")&&(m=t.value.empPassword==t.value.empConfirmPassword)):(m=t.value.empNo!="",m=t.value.empNo.length==8,m=t.value.empPassword!=""&&t.value.empConfirmPassword!="",m=t.value.empPassword==t.value.empConfirmPassword,m=t.value.empAuth!=null&&t.value.empAuth.length>0),_.value=m},I=()=>{let m={empID:u.mid>0?u.mid:0,empNo:t.value.empNo,empName:t.value.empName,empCo:t.value.empBranch,empDep:t.value.empDep,empExt:t.value.empExt,empMail:t.value.empMail,empGroup:(u.mid==0,t.value.empGroup),empPass:u.mid==0?"000000":t.value.empPassword,empAuth:t.value.empAuth.length>0?t.value.empAuth.join(","):""};console.log(t.value),console.log(m),(async()=>{const g=n.hostPath+n.adminManagerUpdatePath;v(!0);const z=await w.callAPI(g,m);v(!1),console.log(z);const H=z.code;J.fire({icon:H==200?"success":"error",title:H==200?"管理員 "+(m.empName+"-"+m.empNo)+" "+(u.mid>0?"修改":"新增")+"成功.":"管理員 "+(m.empName+"-"+m.empNo)+" "+(u.mid>0?"修改":"新增")+"失敗.",text:H==200?"":"請稍候再試...",confirmButtonColor:"#3085d6",confirmButtonText:"碓定"}).then(R=>{R.isConfirmed&&H==200&&f("redirectPage",{managerID:0,lastPage:u.lstPG},"list")})})()};if(u.mid>0){const m=n.hostPath+n.adminManagerQueryPath;(async()=>{v(!0);const g=await w.callAPI(m,{mid:u.mid});v(!1),t.value.empID=g.message.empID,t.value.empNo=g.message.empNo,t.value.empName=g.message.empName,t.value.empBranch=g.message.empBranch,t.value.empBranchName=g.message.empBranchName,t.value.empDep=g.message.empDep,t.value.empDepName=g.message.empDepName,t.value.empExt=g.message.empExt,t.value.empGroup=g.message.empGroup,t.value.empMail=g.message.empMail,t.value.empAuth=g.message.empAuth,t.value.empEnabled=g.message.empEnabled,v(!1),$()})()}else(async()=>{const r=n.hostPath+n.adminGroupListPath;v(!0);const g=await w.callAPI(r,{page:1,rows:30});d.value=g.message,v(!1),$()})();return(m,r)=>(o(),l("div",ha,[K(be,{eid:a.mid,subject:"管理員設定",catagory:"管理員",onAbrot:p},null,8,["eid"]),e("div",ma,[e("div",pa,[e("div",ga,[wa,e("div",fa,[a.mid==0?(o(),ee(Es,{key:0,onChangeEmp:y})):L("",!0),a.mid>0?(o(),l("span",{key:1,innerHTML:s(t).empNo},null,8,$a)):L("",!0)])]),e("div",Ca,[Ma,e("div",ba,[e("span",{innerHTML:s(t).empName},null,8,ya)])])]),e("div",Pa,[e("div",Aa,[xa,e("div",La,[e("span",{innerHTML:s(t).empDepName},null,8,Ia)])]),e("div",Da,[Sa,e("div",ka,[e("span",{innerHTML:s(t).empExt},null,8,Ba)])])]),e("div",Ta,[e("div",Na,[Ha,e("div",za,[e("span",{innerHTML:s(t).empMail},null,8,Ea)])])]),e("div",Ra,[e("div",Va,[Fa,e("div",Ga,[Z(e("input",{type:s(c)?"text":"password",maxlength:"18","onUpdate:modelValue":r[0]||(r[0]=g=>s(t).empPassword=g)},null,8,Oa),[[ce,s(t).empPassword]]),s(c)?(o(),l("svg",{key:0,class:"passEyeClose",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"20",viewBox:"0 0 640 512",onClick:r[1]||(r[1]=g=>U(c)?c.value=!1:c=!1),title:"顯示密碼"},ja)):L("",!0),s(c)?L("",!0):(o(),l("svg",{key:1,class:"passEye",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"18",viewBox:"0 0 576 512",onClick:r[2]||(r[2]=g=>U(c)?c.value=!0:c=!0),title:"隱藏密碼"},Ka))])]),e("div",Ja,[Qa,e("div",Wa,[Z(e("input",{type:s(i)?"text":"password",maxlength:"18","onUpdate:modelValue":r[3]||(r[3]=g=>s(t).empConfirmPassword=g)},null,8,Xa),[[ce,s(t).empConfirmPassword]]),s(i)?(o(),l("svg",{key:0,class:"passEyeClose",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"20",viewBox:"0 0 640 512",onClick:r[4]||(r[4]=g=>U(i)?i.value=!1:i=!1),title:"顯示密碼"},Ya)):L("",!0),s(i)?L("",!0):(o(),l("svg",{key:1,class:"passEye",xmlns:"http://www.w3.org/2000/svg",height:"16",width:"18",viewBox:"0 0 576 512",onClick:r[5]||(r[5]=g=>U(i)?i.value=!0:i=!0),title:"隱藏密碼"},tn))])])])]),e("div",sn,[e("div",an,[nn,a.mid==0?(o(),l("div",on,[G(" 套用群組："),e("select",{onChange:r[6]||(r[6]=g=>A(g))},[ln,(o(!0),l(F,null,j(s(d),(g,z)=>(o(),l("option",{value:g.agID+"_"+g.agContent,key:z,innerHTML:g.agName},null,8,cn))),128))],32)])):L("",!0)]),K(Ce,{mAuth:s(t).empAuth==null?"":s(t).empAuth.join(","),onAuthChange:P},null,8,["mAuth"])]),e("div",dn,[un,e("div",rn,[e("div",{class:"btn btn-sm btn-danger actionBtn aborttBtn",innerHTML:"放棄"+(a.mid<1?"新增":"修改"),onClick:p},null,8,_n),e("div",{class:D(["btn btn-sm actionBtn submitBtn",{"btn-success":s(_),"btn-disabled":!s(_)}]),onClick:I}," 送出",2)])])]))}});const me=N(vn,[["__scopeId","data-v-da6e0bc5"]]),hn={class:"mainContainer"},mn=k({__name:"AdminManager",emits:["loadingSwitch"],setup(a,{emit:b}){let n=se(),f=h(0),w=h(0),c=h(1);const i=b,d=(u,t)=>{n.value=t=="modify"?me:ve,w.value=u.managerID,c.value=u.lastPage},_=u=>{i("loadingSwitch",u)};return n.value=n.value!=null?n.value:f.value==0?ve:me,(u,t)=>(o(),l("div",hn,[(o(),ee(ae(s(n)),{mid:s(w),lstPG:s(c),onRedirectPage:d,onLoadingSwitch:_},null,40,["mid","lstPG"]))]))}});const pn=N(mn,[["__scopeId","data-v-65aa0191"]]),S=a=>(O("data-v-ef62ec93"),a=a(),q(),a),gn={class:"mainContainer"},wn={class:"mainHeader"},fn=S(()=>e("div",{class:"mainTitle"},[e("h3",null,[G("管理員群組設定 - "),e("span",{class:"titleMid"},"管理員群組列表")])],-1)),$n={class:"mainOptions"},Cn=S(()=>e("div",null,null,-1)),Mn=S(()=>e("title",null,"搜尋",-1)),bn=S(()=>e("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)),yn=[Mn,bn],Pn=S(()=>e("div",{class:"searchTitle"},"搜尋",-1)),An=S(()=>e("div",{class:"searchBody"},null,-1)),xn=[Pn,An],Ln={key:0,class:"zeroRow"},In=S(()=>e("div",null,[e("h4",null,"未尋獲任何資料...")],-1)),Dn={class:"showAllBtn"},Sn={key:1,class:"listContainer"},kn={class:"resultRows"},Bn={class:"showRemoved"},Tn={class:"resultCount"},Nn={class:"resultNumber"},Hn=S(()=>e("div",{class:"listTitle"},[e("div",{class:"listTitleField"}),e("div",{class:"listTitleField"},"管理員群組"),e("div",{class:"listTitleField"},"操作")],-1)),zn={class:"listBody"},En={class:"listLine"},Rn=["innerHTML"],Vn=["innerHTML"],Fn={key:0,class:"listField managerAction"},Gn={class:"listAction"},On=["onClick"],qn=S(()=>e("title",null,"編輯",-1)),jn=S(()=>e("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"},null,-1)),Un=[qn,jn],Kn={class:"listAction"},Jn=["onClick"],Qn=S(()=>e("title",null,"刪除",-1)),Wn=S(()=>e("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"},null,-1)),Xn=[Qn,Wn],Zn={key:1,class:"listField managerAction2"},Yn={class:"listAction"},ei=["onClick"],ti=S(()=>e("title",null,"復原",-1)),si=S(()=>e("path",{d:"M5.921 11.9 1.353 8.62a.719.719 0 0 1 0-1.238L5.921 4.1A.716.716 0 0 1 7 4.719V6c1.5 0 6 0 7 8-2.5-4.5-7-4-7-4v1.281c0 .56-.606.898-1.079.62z"},null,-1)),ai=[ti,si],ni={class:"listPagination"},ii={class:"PaginationContainer"},oi=S(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-rewind-fill"})],-1)),li=S(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-play-fill lastPage"})],-1)),ci={class:"pageList"},di=S(()=>e("div",null,null,-1)),ui=S(()=>e("div",null,null,-1)),ri=S(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-play-fill"})],-1)),_i=S(()=>e("div",{class:"turnPageBtn"},[e("i",{class:"bi bi-fast-forward-fill"})],-1)),vi=k({__name:"AdminGroupList",props:{lastPage:Number},emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=b,w=new ne,c=new X;$e();const i=n.hostPath+n.adminGroupListPath,d=h(0),_=h();let u=h(0);h(!1);let t=h(!1),P=h(1),p=h(30),y=h([]),v=h(0),A=h(0),$=h(!1);const I=a;ie(()=>I.lastPage,(T,x)=>{P.value=x??1});const m=async(T,x)=>{R(!0);const C=await c.callAPI(i,{page:T,rows:x,showAll:$.value});_.value=C.message,u.value=Math.ceil(_.value.length/p.value),d.value=_.value.length,v.value=u.value<5?1:Math.floor(P.value/5)*5,A.value=v.value+5>=u.value?u.value:v.value+5,y.value.length=0;for(let M=v.value;M<A.value+1;M++)y.value.push(M);R(!1)},r=T=>{f("redirectPage",{groupObj:T,lastPage:P.value},"modify")},g=(T,x)=>{J.fire({icon:"question",title:`警告!
群組 "`+x+`"
將會被刪除`,text:"您要確定要這麼做?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"碓定",cancelButtonText:"放棄"}).then(C=>{if(C.isConfirmed){const M=n.hostPath+n.adminGroupRemovePath;(async()=>{R(!0),await c.callAPI(M,{agID:T}),R(!1),m(P.value,p.value),w.miniSuccess("群組 "+x+" 已刪除")})()}})},z=(T,x)=>{J.fire({icon:"question",title:'群組 "'+x+`"
將會被復原`,text:"您要確定要這麼做?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"碓定",cancelButtonText:"放棄"}).then(C=>{if(C.isConfirmed){const M=n.hostPath+n.adminGroupRevivePath;(async()=>{R(!0),await c.callAPI(M,{agID:T}),R(!1),m(P.value,p.value),w.miniSuccess("群組 "+x+" 已復原")})()}})},H=()=>{$.value=!$.value,m(P.value,p.value)},R=T=>{f("loadingSwitch",T)};return m(P.value,p.value),(T,x)=>(o(),l("div",gn,[e("div",wn,[fn,e("div",$n,[Cn,e("div",null,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 512 512",class:"searchBtn",onClick:x[0]||(x[0]=C=>U(t)?t.value=!s(t):t=!s(t))},yn))]),e("div",null,[e("div",{class:"btn btn-sm btn-success",onClick:x[1]||(x[1]=C=>r({agID:0,agName:"",agRank:99,agContent:""}))},"新增群組 ")])])]),e("div",{class:D(["searchContainer",{showSearch:s(t)}])},xn,2),d.value==0?(o(),l("div",Ln,[In,e("div",Dn,[e("div",{class:D(["reviveBtn btn btn-sm",{enableRevive:!s($),"btn-primary":s($)}]),onClick:H},"顯示已刪除資料",2)])])):L("",!0),d.value>0?(o(),l("div",Sn,[e("div",kn,[e("div",Bn,[e("div",{class:D(["reviveBtn btn btn-sm",{enableRevive:!s($),"btn-primary":s($)}]),onClick:H},"顯示已刪除資料",2)]),e("div",Tn,[G("資料總筆數："),e("span",Nn,Y(d.value),1),G(" 筆")])]),Hn,e("div",zn,[(o(!0),l(F,null,j(_.value,(C,M)=>(o(),l("div",{class:D(["listLineContainer",{removedRecord:C.agEnabled==0}]),key:M},[e("div",En,[e("div",{class:"listField lineIndex",innerHTML:M+1},null,8,Rn),e("div",{class:"listField managerNo",innerHTML:C.agName},null,8,Vn),C.agEnabled>0?(o(),l("div",Fn,[e("div",Gn,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512",class:"actionEdit",onClick:V=>r(C)},Un,8,On))]),e("div",Kn,[C.agEnabled>0?(o(),l("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",height:"16",width:"14",viewBox:"0 0 448 512",class:"actionDel",onClick:V=>g(C.agID,C.agName)},Xn,8,Jn)):L("",!0)])])):L("",!0),C.agEnabled==0?(o(),l("div",Zn,[e("div",Yn,[(o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",class:"bi bi-reply-fill dataRestore",viewBox:"0 0 16 16",onClick:V=>z(C.agID,C.agName)},ai,8,ei))])])):L("",!0)])],2))),128))]),e("div",ni,[e("div",ii,[oi,li,e("div",ci,[di,(o(!0),l(F,null,j(s(y),C=>(o(),l("div",{key:C,class:D(["pageItem",{pageItemPicked:C==s(P),pageItemMov:C!=s(P)}])},Y(C),3))),128)),ui]),ri,_i])])])):L("",!0)]))}});const pe=N(vi,[["__scopeId","data-v-ef62ec93"]]),le=a=>(O("data-v-99c6ef94"),a=a(),q(),a),hi={class:"mainContainer"},mi={class:"grpDataContainer"},pi={class:"grpDataLine"},gi={class:"grpDataCase"},wi=le(()=>e("div",{class:"grpDataTitleField"},"群組名稱",-1)),fi={class:"grpDataInputeField"},$i={class:"grpDataCase"},Ci=le(()=>e("div",{class:"grpDataTitleField"},"群組層級",-1)),Mi={class:"grpDataInputeField"},bi=fe('<option value="99" data-v-99c6ef94>一般管理員</option><option value="3" data-v-99c6ef94>一般主管</option><option value="2" data-v-99c6ef94>高階主管</option><option value="1" data-v-99c6ef94>最高管理者</option><option value="0" data-v-99c6ef94>系統管理者</option>',5),yi=[bi],Pi={class:"authContainer"},Ai=le(()=>e("div",{class:"authContainerHeader"},[e("h5",null,"權限設定")],-1)),xi={class:"btnContainer"},Li=le(()=>e("div",null,null,-1)),Ii={class:"ActionBtnContainer"},Di=["innerHTML"],Si=k({__name:"AdminGroupEdit",props:{gObj:{type:Object,required:!0},lstPG:{type:Number,required:!0}},emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){const n=Q(),f=new X,w=b,c=a;let i=h({groupID:0,groupName:"",groupRank:99,groupAuth:""});xe(()=>{i.value.groupID=c.gObj.agID,i.value.groupName=c.gObj.agName,i.value.groupRank=c.gObj.agRank,i.value.groupAuth=c.gObj.agContent,d.value=i.value.groupID>0});let d=h(!1);const _=async()=>{const y=n.hostPath+n.adminGroupNameVerifyPath;p(!0);const v=await f.callAPI(y,{groupid:i.value.groupID,groupName:i.value.groupRank});d.value=v.message.toUpperCase()=="OK",p(!1)},u=y=>{i.value.groupAuth=y.join(",")},t=()=>{w("redirectPage",{managerID:0,lastPage:c.lstPG},"list")},P=async()=>{const y=n.hostPath+n.adminGroupUpdatePath;p(!0);const v=await f.callAPI(y,i.value);p(!1);let A="群組資料";A+=i.value.groupID==0?"新增":"更新",A+=v.code==200?"成功":"失敗";let $="群組 "+i.value.groupName+" 已"+(i.value.groupID==0?"新增":"更新")+" !";J.fire({icon:v.code==200?"success":"error",title:A,text:v.code==200?$:v.message,confirmButtonColor:"#3085d6",confirmButtonText:"碓定"}).then(I=>{w("redirectPage",{managerID:0,lastPage:c.lstPG},"list")})},p=y=>{w("loadingSwitch",y)};return(y,v)=>(o(),l("div",hi,[K(be,{eid:s(i).groupID,subject:"管理群組設定",catagory:"群組",onAbrot:t},null,8,["eid"]),e("div",mi,[e("div",pi,[e("div",gi,[wi,e("div",fi,[Z(e("input",{type:"text",maxlength:"10","onUpdate:modelValue":v[0]||(v[0]=A=>s(i).groupName=A),onChange:_},null,544),[[de,s(i).groupName]])])]),e("div",$i,[Ci,e("div",Mi,[Z(e("select",{"onUpdate:modelValue":v[1]||(v[1]=A=>s(i).groupRank=A)},yi,512),[[Le,s(i).groupRank]])])])])]),e("div",Pi,[Ai,K(Ce,{mAuth:s(i).groupAuth,onAuthChange:u},null,8,["mAuth"])]),e("div",xi,[Li,e("div",Ii,[e("div",{class:"btn btn-sm btn-danger actionBtn aborttBtn",innerHTML:"放棄"+(a.gObj.agID<1?"新增":"修改"),onClick:t},null,8,Di),e("div",{class:D(["btn btn-sm actionBtn submitBtn",{"btn-success":s(d)&&s(i).groupAuth!="","btn-disabled":!s(d)||s(i).groupAuth==""}]),onClick:P}," 送出",2)])])]))}});const ge=N(Si,[["__scopeId","data-v-99c6ef94"]]),ki={class:"mainContainer"},Bi=k({__name:"AdminGroup",emits:["loadingSwitch"],setup(a,{emit:b}){let n=se(),f=h(0),w=h(),c=h(1);const i=b,d=(u,t)=>{n.value=t=="modify"?ge:pe,w.value=u.groupObj,c.value=u.lastPage},_=u=>{i("loadingSwitch",u)};return n.value=n.value!=null?n.value:f.value==0?pe:ge,(u,t)=>(o(),l("div",ki,[(o(),ee(ae(s(n)),{gObj:s(w),lstPG:s(c),onRedirectPage:d,onLoadingSwitch:_},null,40,["gObj","lstPG"]))]))}});const Ti=N(Bi,[["__scopeId","data-v-13a2dea4"]]),Ni={class:"AdminMainContainer"},Hi={class:"AdminMainBody"},zi=k({__name:"AdminMain",props:{goFunction:String},emits:["redirectPage","loadingSwitch"],setup(a,{emit:b}){let n=se();const f=b,w=(d,_)=>{i(""+_)},c=d=>{f("loadingSwitch",d)},i=d=>{switch(d){case"":n.value=_e;break;case"member":n.value=It;break;case"manager_group":n.value=Ti;break;case"manager":n.value=pn;break;case"login":f("redirectPage",null,d);break}};return n.value=_e,(d,_)=>(o(),l("div",Ni,[K(dt,{onRedirectPage:w,onLoadingSwitch:c}),e("div",Hi,[(o(),ee(ae(s(n)),{onRedirectPage:w,onLoadingSwitch:c},null,32))])]))}});const we=N(zi,[["__scopeId","data-v-d01c2979"]]),Ei={class:"adminContainer"},Ri=k({__name:"AdminView",emits:["loadingSwitch"],setup(a,{emit:b}){let n=se(),f=h(),w=h(""),c=typeof sessionStorage.getItem("adminInfo")<"u"&&sessionStorage.getItem("adminInfo")!=null;c&&(f.value=JSON.parse(""+sessionStorage.getItem("adminInfo")));const i=b,d=(u,t)=>{if(t!=null)switch(t){case"main":case"home":n.value=we;break;case"login":n.value=re;break;default:w.value=t;break}},_=u=>{i("loadingSwitch",u)};return n.value=n.value!=null?n.value:c?we:re,(u,t)=>(o(),l("div",Ei,[(o(),ee(ae(s(n)),{goFunction:s(w),onRedirectPage:d,onLoadingSwitch:_},null,40,["goFunction"]))]))}});const Fi=N(Ri,[["__scopeId","data-v-10c367c5"]]);export{Fi as default};
